#  疫情通vue项目

    这是一个移动端的疫情数据信息介绍项目，在模仿丁香医生的基础上进行改进。

班级：计算机1902

姓名：潘禹均

学号：31901048



## 1. 技术点

1.组件
2.网络请求axios
3.vue中使用echarts
4.vue中封装的tabs组件~自定义封装组件




## 2. 项目创建及其初始化

命令行：vue create vue-covid19

![1652555997234](assets/1652555997234.png)

![1652556005812](assets/1652556005812.png)

### 试运行

![1652556045494](assets/1652556045494.png)

可以看到vue的初始界面

![1652556066377](assets/1652556066377.png)



### 安装axios

![1652556113013](assets/1652556113013.png)





### 安装vant

![1652554571223](assets/1652554571223.png)



#### *注意点：因为之前装了vant3后又装了vant2，因此配置环境需要重复之前的历程

npm i vant   ->    npm i vant@latest  -> npm i vant@latest-v2 -S    ->npm uninstall vant   ->   npm i vant 

(不知道为什么会这样)



根据vant指南，进行操作

![1652556141355](assets/1652556141355.png)



### 删除不必要的组件

![1652556282076](assets/1652556282076.png)

![1652556373257](assets/1652556373257.png)



![1652556400836](assets/1652556400836.png)



查看效果

![1652556514939](assets/1652556514939.png)



###  

### 初始化css

![1652556925045](assets/1652556925045.png)



方式1：在app.vue中引用公共初始化css

![1652557404247](assets/1652557404247.png)





方式2：在main.js中引入初试css

![1652557195684](assets/1652557195684.png)



以上2种方式，2选1就好。



## 3. 移动端适配

资料：[手机端页面自适应：rem布局_axl234的技术博客_51CTO博客](https://blog.51cto.com/u_15581727/5177771) 

![1652559979060](assets/1652559979060.png)



引用rem.js，自动适配

![1652558171838](assets/1652558171838.png)

![1652558180615](assets/1652558180615.png)





## 4. 界面1 首页

首先加入自己设计的图片，作为首页封面

![1652559085750](assets/1652559085750.png)



在home.vue中应用

![1652559134386](assets/1652559134386.png)



效果如下：

![1652559183150](assets/1652559183150.png)





#### 问题1 直接在 img处设置width为100%，图片消失？

当我把width设为100%时，出现了问题

![1652560434141](assets/1652560434141.png)

![1652560454239](assets/1652560454239.png)



在代码中设置为100%，实际运行中却是0，这是为什么？

##### 解决方案：设置一个名img为class的类，通过style里面设置img的width来解决问题。

![1652561275133](assets/1652561275133.png)



### 首页基本信息



#### 标题

建立组件1 CovInfo.vue

![1652635901106](assets/1652635901106.png)



在HomeView.vue里面引入该组件

![1652635920942](assets/1652635920942.png)



此时存在一个问题：实际效果的标题总是居中

![1652635957701](assets/1652635957701.png)



后来在CovInfo.vue里面的css，.title的地方加上了 display：flex;

![1652636020260](assets/1652636020260.png)

问题解决：

![1652636033282](assets/1652636033282.png)



#### 处理接口地址

疫情数据接口：http://api.tianapi.com/ncov/index?key=e5c7988b3c46963eb8d8f3a13db36d9e

此时配置一个公共的接口文档

在src下新建文件夹 api

![1652636860788](assets/1652636860788.png)

其中，base.js 中放的是公共请求的接口

![1652637264462](assets/1652637264462.png)

index.js中写的是请求方法，接下来的操作以此类推

![1652637999089](assets/1652637999089.png)



#### 在HomeView.vue中尝试获取数据

![1652639239895](assets/1652639239895.png)

在控制台查看

![1652639367330](assets/1652639367330.png)





#### 尝试轮播图

####问题2：想实现三个轮播图，但是现在三个图却显示在了一个界面上？

![1652806426951](assets/1652806426951.png)

![1652806436469](assets/1652806436469.png)





![1652806363178](assets/1652806363178.png)

05.18

#####解决：安装插件并设置轮播图的css样式



![1652880355635](assets/1652880355635.png)

设置 display:inline-block



![1652880295417](assets/1652880295417.png)

![1652880289722](assets/1652880289722.png)

![1652880310717](assets/1652880310717.png)

### 组件1：轮播图组件

将轮播图作为一个组件来封装

由于命名swipe会出错，因此文件夹和文件名称都改为SwiperContainer，驼峰写法。

![1652895382776](assets/1652895382776.png)

![1652895400605](assets/1652895400605.png)



#### 问题3：navbar顶部导航栏，文字不能在同一行的问题

按照vant手册，应该是

![1652964816782](assets/1652964816782.png)



但是，实际情况是：

![1652965449376](assets/1652965449376.png)



##### 解决方案：因为没有安装插件

![1652965404348](assets/1652965404348.png)



![1652965351927](assets/1652965351927.png)

![1652967060500](assets/1652967060500.png)

安装插件后，还是有问题

![1652967108455](assets/1652967108455.png)



后来，发现原因在于，vant引用后，不需要自己写样式。

![1652967197576](assets/1652967197576.png)

给样式注解掉之后，问题解决

![1652967275541](assets/1652967275541.png)

### 组件2： NavBar 组件

![1653113311094](assets/1653113311094.png)

每个界面都有自己对应的NavBar



下面以首页的Navbar为例

![1653113677203](assets/1653113677203.png)



![1653113688826](assets/1653113688826.png)



效果如下：

![1653113710803](assets/1653113710803.png)





其他界面 多了返回按钮，其他都基本一致

![1653113737922](assets/1653113737922.png)



效果如下:

![1653113775021](assets/1653113775021.png)







### 组件3： TabBar组件

在每个界面的底部，也存在着导航栏

以首页为例

![1653113836567](assets/1653113836567.png)



查阅 vant组件库资料：

![1653113872735](assets/1653113872735.png)



引用该组件：

![1653113897788](assets/1653113897788.png)

![1653113905392](assets/1653113905392.png)



#### 对TabBar里面的图标进行更换

首先去iconfont阿里巴巴矢量图标库，将需要的图标添加到该项目

![1653114450461](assets/1653114450461.png)

点击 ”下载至本地“



![1653114491112](assets/1653114491112.png)



![1653114501353](assets/1653114501353.png)





![1653114510071](assets/1653114510071.png)



将文件夹中的文件复制到

项目对应的文件下：

![1653114545308](assets/1653114545308.png)



之后在代码中应用

![1653114568790](assets/1653114568790.png)



## 5. echarts安装

### echarts安装

命令：cnpm i echarts@4.x -S

安装4.x版本，有利于用地图

在view里面建立 VueEcharts文件夹，里面新建文件 ChinaMap.vue，用来写中国国内疫情地图

![1653405228289](assets/1653405228289.png)

根据ECHARTS官方文档，快速入门的方式，来写：

![1653405257594](assets/1653405257594.png)



在DomesticInfo.vue里面引入 ChinaMap组件

![1653405314854](assets/1653405314854.png)



在 ChinaMap.vue文件中尝试官方文档，建立一个简单的图

![1653405358203](assets/1653405358203.png)

![1653405363763](assets/1653405363763.png) 

#### 折线图

![1653504397719](assets/1653504397719.png)

![1653508568587](assets/1653508568587.png)















## 核酸检测点查询界面

### vant card的使用

#### 问题：desc太长显示不全

![1653362335430](assets/1653362335430.png)

![1653362382132](assets/1653362382132.png)



##### 解决方案：改用template

![1653362539186](assets/1653362539186.png)





![1653362561678](assets/1653362561678.png)



通过h4，来加粗采样点名称

![1653372945571](assets/1653372945571.png)



![1653372957072](assets/1653372957072.png)

#### 问题：打开界面不显示顶部，而是显示在中部或者底部

![1653374946113](assets/1653374946113.png)

##### 解决方案：在js中加入代码



![1653374996295](assets/1653374996295.png)



打开后，显示在顶部

![1653375017341](assets/1653375017341.png)

## 打包移动端

用Hbuilder打包

### 注意点：

1.不能用history模式，需要改为hash

![1653553377465](assets/1653553377465.png)



2.在vue.config.js中配置



![1653553483424](assets/1653553483424.png)



3结果

存在一些小问题，基本满意。



### 问题：iconfont在app中显示异常

![1653574489600](assets/1653574489600.png)





根据官方文档的解决方案：[uni-app官网 (dcloud.io)](https://uniapp.dcloud.io/matter.html) 

![1653574575468](assets/1653574575468.png)

原来的css

![1653574618946](assets/1653574618946.png)



修改后：

![1653574655929](assets/1653574655929.png)



## 新闻界面

### 图片设计

![1653582267555](assets/1653582267555.png)



放入轮播图效果

![1653582282368](assets/1653582282368.png)

